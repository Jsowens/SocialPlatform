@inherits WidgetBase

<div class="center-vertical layout-horizontal padding-small button @Class" style="@FormattedStyle">
    <StatusIcon LowRightIndColor="@SetStatus()" LowRightIndVisible="true"/>
    <div id="name-status-group" class="layout-vertical justify-horizontal-left spacer" style="height: 100%;">
        <span id="user-name" style="color: @Color;">@UserName</span>
        <span id="user-status">@StatusMessage</span>
    </div>
</div>

@code {
    [Parameter] public string Color { get; set; } = "white";
    [Parameter] public string UserName { get; set; } = "Username";
    [Parameter] public string? StatusMessage { get; set; } = null;
    [Parameter] public string Status { get; set; } = "Online";


    public string SetStatus()
    {
        return Status switch
        {
            "Online" => "green",
            "Offline" => "grey",
            "Away" => "yellow",
            "Busy" => "red",
            _ => "grey"
        };
    }
    public void SetUnreadMessages(int count)
    {
        StatusIcon.LowRightIndValue = count > 0 ? count.ToString() : string.Empty;
        StatusIcon.Refresh();
    }

    public StatusIcon StatusIcon { get; set; } = null!;

}